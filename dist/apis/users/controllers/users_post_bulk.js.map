{"version":3,"sources":["../source/apis/users/controllers/users_post_bulk.js"],"names":["bulkSaveUsers","req","res","next","users","locationAccess","role","type","body","length","Boom","badRequest","validUsers","services","validateUsers","savedUsers","bulkInsert","json","err"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,eAAeA,aAAf,CAA6BC,GAA7B,EAAkCC,GAAlC,EAAuCC,IAAvC,EAA6C;AAC1D,MAAI;AACF,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA,cAAT;AAAyBC,MAAAA,IAAzB;AAA+BC,MAAAA;AAA/B,QAAwCN,GAAG,CAACO,IAAlD;;AAEA,QAAIJ,KAAK,CAACK,MAAN,GAAe,IAAnB,EAAyB;AACvB,YAAMC,cAAKC,UAAL,CAAgB,0CAAhB,CAAN;AACD;;AACD,UAAMC,UAAU,GAAG,MAAMC,eAASC,aAAT,CAAuBV,KAAvB,CAAzB;AACA,UAAMW,UAAU,GAAG,MAAMF,eAASG,UAAT,CACvBJ,UADuB,EAEvBP,cAFuB,EAGvBC,IAHuB,EAIvBC,IAJuB,CAAzB;AAMA,WAAOL,GAAG,CAACe,IAAJ,CAASF,UAAT,CAAP;AACD,GAdD,CAcE,OAAOG,GAAP,EAAY;AACZ,WAAOf,IAAI,CAACe,GAAD,CAAX;AACD;AACF","sourcesContent":["import Boom from '@hapi/boom';\nimport services from '../services/index';\n\nexport default async function bulkSaveUsers(req, res, next) {\n  try {\n    const { users, locationAccess, role, type } = req.body;\n\n    if (users.length > 5000) {\n      throw Boom.badRequest('Cannot save more than 5000 users at once');\n    }\n    const validUsers = await services.validateUsers(users);\n    const savedUsers = await services.bulkInsert(\n      validUsers,\n      locationAccess,\n      role,\n      type\n    );\n    return res.json(savedUsers);\n  } catch (err) {\n    return next(err);\n  }\n}\n"],"file":"users_post_bulk.js"}