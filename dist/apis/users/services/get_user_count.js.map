{"version":3,"sources":["../source/apis/users/services/get_user_count.js"],"names":["getUsersCount","divisionId","search","limit","offset","role","type","all","Users","count","locationAccess","$elemMatch","division","$in","split","$exists","active","$or","firstName","$regex","$options","lastName","userId"],"mappings":";;;;;;;AAAA;;;;AAEe,eAAeA,aAAf,CACbC,UADa,EAEbC,MAFa,EAGbC,KAHa,EAIbC,MAJa,EAKbC,IALa,EAMbC,IANa,EAObC,GAPa,EAQb;AACA,QAAMC,KAAK,GAAG,oBAAd;AACA,QAAMC,KAAK,GAAG,MAAMD,KAAK,CAACC,KAAN,CAAY;AAC9BC,IAAAA,cAAc,EAAET,UAAU,GACtB;AACEU,MAAAA,UAAU,EAAE;AACVC,QAAAA,QAAQ,EAAE;AAAEC,UAAAA,GAAG,EAAEZ,UAAU,CAACa,KAAX,CAAiB,GAAjB;AAAP;AADA;AADd,KADsB,GAMtB;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAP0B;AAQ9BC,IAAAA,MAAM,EAAE,CAACT,GAAD,GAAO,IAAP,GAAc;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KARQ;AAS9BV,IAAAA,IAAI,EAAEA,IAAI,IAAI;AAAEU,MAAAA,OAAO,EAAE;AAAX,KATgB;AAU9B,QAAIT,IAAI,GAAG;AAAEA,MAAAA;AAAF,KAAH,GAAc,EAAtB,CAV8B;AAW9B,QAAIJ,MAAM,GACN;AACEe,MAAAA,GAAG,EAAE,CACH;AAAEC,QAAAA,SAAS,EAAE;AAAEC,UAAAA,MAAM,EAAG,GAAEjB,MAAO,EAApB;AAAuBkB,UAAAA,QAAQ,EAAE;AAAjC;AAAb,OADG,EAEH;AAAEC,QAAAA,QAAQ,EAAE;AAAEF,UAAAA,MAAM,EAAG,GAAEjB,MAAO,EAApB;AAAuBkB,UAAAA,QAAQ,EAAE;AAAjC;AAAZ,OAFG,EAGH;AAAEE,QAAAA,MAAM,EAAE;AAAEH,UAAAA,MAAM,EAAG,GAAEjB,MAAO,EAApB;AAAuBkB,UAAAA,QAAQ,EAAE;AAAjC;AAAV,OAHG;AADP,KADM,GAQN,EARJ;AAX8B,GAAZ,CAApB;AAsBA,SAAOX,KAAP;AACD","sourcesContent":["import UsersModel from '../models/user';\n\nexport default async function getUsersCount(\n  divisionId,\n  search,\n  limit,\n  offset,\n  role,\n  type,\n  all\n) {\n  const Users = UsersModel();\n  const count = await Users.count({\n    locationAccess: divisionId\n      ? {\n          $elemMatch: {\n            division: { $in: divisionId.split(',') },\n          },\n        }\n      : { $exists: true },\n    active: !all ? true : { $exists: true },\n    role: role || { $exists: true },\n    ...(type ? { type } : {}),\n    ...(search\n      ? {\n          $or: [\n            { firstName: { $regex: `${search}`, $options: 'i' } },\n            { lastName: { $regex: `${search}`, $options: 'i' } },\n            { userId: { $regex: `${search}`, $options: 'i' } },\n          ],\n        }\n      : {}),\n  });\n\n  return count;\n}\n"],"file":"get_user_count.js"}