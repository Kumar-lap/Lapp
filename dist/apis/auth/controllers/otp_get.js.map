{"version":3,"sources":["../source/apis/auth/controllers/otp_get.js"],"names":["login","req","res","next","mobileRegex","mobileNumber","query","match","Boom","badRequest","verificationStatus","services","sendOtp","json","message","error"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,eAAeA,KAAf,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,EAAqC;AAClD,MAAI;AACF,UAAMC,WAAW,GAAG,8BAApB;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAmBJ,GAAG,CAACK,KAA7B;AACA,UAAMC,KAAK,GAAGF,YAAY,CAACE,KAAb,CAAmBH,WAAnB,CAAd;AACA,QAAI,CAACG,KAAL,EAAY,MAAMC,cAAKC,UAAL,CAAgB,uBAAhB,CAAN;AACZ,UAAMC,kBAAkB,GAAG,MAAMC,eAASC,OAAT,CAAiBP,YAAjB,CAAjC;;AACA,QAAIK,kBAAkB,KAAK,SAA3B,EAAsC;AACpC,aAAOR,GAAG,CAACW,IAAJ,CAAS;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAT,CAAP;AACD;;AACD,UAAMN,cAAKC,UAAL,CAAgB,kCAAhB,CAAN;AACD,GAVD,CAUE,OAAOM,KAAP,EAAc;AACd,WAAOZ,IAAI,CAACY,KAAD,CAAX;AACD;AACF","sourcesContent":["import Boom from '@hapi/boom';\nimport services from '../services/index';\n\nexport default async function login(req, res, next) {\n  try {\n    const mobileRegex = /^[0][1-9]\\d{9}$|^[1-9]\\d{9}$/;\n    const { mobileNumber } = req.query;\n    const match = mobileNumber.match(mobileRegex);\n    if (!match) throw Boom.badRequest('Invalid mobile number');\n    const verificationStatus = await services.sendOtp(mobileNumber);\n    if (verificationStatus === 'pending') {\n      return res.json({ message: 'OTP sent successfully' });\n    }\n    throw Boom.badRequest('Unable to send OTP at the moment');\n  } catch (error) {\n    return next(error);\n  }\n}\n"],"file":"otp_get.js"}