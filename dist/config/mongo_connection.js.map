{"version":3,"sources":["../source/config/mongo_connection.js"],"names":["initiateMongoConnection","env","MONGODBSRV","Error","mongoose","connect","useNewUrlParser","readPreference","set","connection","on","console","log","error"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,eAAeA,uBAAf,GAAyC;AACtD,MAAI,CAACC,aAAIC,UAAT,EAAqB;AACnB,UAAM,IAAIC,KAAJ,CAAU,qCAAV,CAAN;AACD;;AACD,MAAIF,aAAIC,UAAR,EAAoB;AAClBE,sBAASC,OAAT,CAAiBJ,aAAIC,UAArB,EAAiC;AAC/BI,MAAAA,eAAe,EAAE,IADc;AAE/BC,MAAAA,cAAc,EAAE;AAFe,KAAjC;;AAIAH,sBAASI,GAAT,CAAa,OAAb,EAAsB,IAAtB;AACD;;AACDJ,oBAASK,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,MAAM;AACxCC,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD,GAFD;;AAIAR,oBAASK,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAiCG,KAAD,IAAW;AACzCF,IAAAA,OAAO,CAACC,GAAR,CAAa,8CAA6CC,KAAM,EAAhE;AACD,GAFD;AAGD","sourcesContent":["import mongoose from 'mongoose';\nimport env from './env';\n\nexport default async function initiateMongoConnection() {\n  if (!env.MONGODBSRV) {\n    throw new Error('No database connection string found');\n  }\n  if (env.MONGODBSRV) {\n    mongoose.connect(env.MONGODBSRV, {\n      useNewUrlParser: true,\n      readPreference: 'nearest',\n    });\n    mongoose.set('debug', true);\n  }\n  mongoose.connection.on('connected', () => {\n    console.log('connected on mongo server');\n  });\n\n  mongoose.connection.on('error', (error) => {\n    console.log(`An error occured while connecting to mongo ${error}`);\n  });\n}\n"],"file":"mongo_connection.js"}